<section class="mb-2">
  <span class="font-medium text-2xl text-blue-900">Examinations</span>
</section>
<section
  class="grid grid-cols-1 md:grid-cols-2 gap-4"
  *ngIf="vm$ | async as vm"
>
  <div class="col-span-1" *ngFor="let exm of vm">
    <mat-card class="border border-blue-900 space-y-2 h-full">
      <section class="flex items-center space-x-4">
        <img
          class="rounded-full border border-blue-900 examination-filter"
          src="assets/icons/ph_icon_{{ exm.icon_index }}.png"
        />
        <figcaption class="text-lg text-blue-900 text-ellipsis">
          {{ exm.name }}
        </figcaption>
      </section>
      <section class="flex flex-col">
        <div class="text-blue-600 text-ellipsis">{{ exm.description }}</div>
        <ng-container *ngIf="exm.required_doctors">
          <ng-template
            [ngTemplateOutlet]="skillList"
            [ngTemplateOutletContext]="{
              skills: exm.required_doctors,
              title: 'Doctor'
            }"
          ></ng-template>
        </ng-container>
        <ng-container *ngIf="exm.required_lab_spec">
          <ng-template
            [ngTemplateOutlet]="skillList"
            [ngTemplateOutletContext]="{
              skills: [exm.required_lab_spec],
              title: 'Lab Specialist'
            }"
          ></ng-template>
        </ng-container>
      </section>
    </mat-card>
  </div>
</section>

<ng-template #skillList let-skills="skills" let-title="title">
  <mat-list class="">
    <div mat-subheader>Required {{ title }} Skills</div>
    <div class="space-y-2">
      <ng-container *ngFor="let skill of skills">
        <section mat-line class="flex flex-row items-center">
          <img
            class="rounded-full"
            src="assets/icons/ph_icon_{{ skill.icon_index }}.png"
          />
          <figcaption class="flex flex-col pl-2">
            <div class="font-bold whitespace-normal">
              {{ skill.name }}
            </div>
            <div class="whitespace-normal">{{ skill.description }}</div>
          </figcaption>
        </section>
      </ng-container>
    </div>
  </mat-list>
</ng-template>
